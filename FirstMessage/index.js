(function(u,h,f,_){"use strict";var A=function(e){return e[e.BUILT_IN=0]="BUILT_IN",e[e.BUILT_IN_TEXT=1]="BUILT_IN_TEXT",e[e.BUILT_IN_INTEGRATION=2]="BUILT_IN_INTEGRATION",e[e.BOT=3]="BOT",e[e.PLACEHOLDER=4]="PLACEHOLDER",e}({}),l=function(e){return e[e.SUB_COMMAND=1]="SUB_COMMAND",e[e.SUB_COMMAND_GROUP=2]="SUB_COMMAND_GROUP",e[e.STRING=3]="STRING",e[e.INTEGER=4]="INTEGER",e[e.BOOLEAN=5]="BOOLEAN",e[e.USER=6]="USER",e[e.CHANNEL=7]="CHANNEL",e[e.ROLE=8]="ROLE",e[e.MENTIONABLE=9]="MENTIONABLE",e[e.NUMBER=10]="NUMBER",e[e.ATTACHMENT=11]="ATTACHMENT",e}({}),y=function(e){return e[e.CHAT=1]="CHAT",e[e.USER=2]="USER",e[e.MESSAGE=3]="MESSAGE",e}({});const{sendBotMessage:T}=f.findByProps("sendBotMessage"),p=f.findByProps("getAPIBaseURL","get");let N=[];const I=function(){N.push(h.registerCommand({name:"firstmessage",displayName:"firstmessage",description:"Tired of scrolling to first message?",displayDescription:"Tired of scrolling to first message?",type:y.CHAT,inputType:A.BUILT_IN_TEXT,applicationId:"-1",options:[{name:"user",displayName:"user",description:"Target user to get their first message in this server/dm",displayDescription:"Target user to get their first message in this server/dm",type:l.USER,required:!1},{name:"channel",displayName:"channel",description:"Target channel to get first message of",displayDescription:"Target channel to get first message of",type:l.CHANNEL,required:!1},{name:"send",displayName:"send",description:"Whether to send the resulting url",displayDescription:"Whether to send the resulting url",type:l.BOOLEAN,required:!1}],async execute(e,t){const i=e.find(function(n){return n.name==="user"})?.value,s=e.find(function(n){return n.name==="channel"})?.value,m=e.find(function(n){return n.name==="send"})?.value,a=t.guild?.id,o=t.channel.id,c=t.channel.type===1;let r="https://discord.com/channels/";if(!i&&!s)if(c){const n=await g(o);r+=`@me/${o}/${n.id}`}else{const n=await d(a);r+=`${a}/${n.channel_id}/${n.id}`}else if(i)if(c){const n=await g(o,i);r+=`@me/${o}/${n.id}`}else{const n=await d(a,i);r+=`${a}/${n.channel_id}/${n.id}`}else if(s){if(c)return T(o,"This combination cannot be used in dms!");const n=await d(a,null,s);r+=`${a}/${s}/${n.id}`}else{if(c)return T(o,"This combination cannot be used in dms!");const n=await d(a,i,s);r+=`${a}/${s}/${n.id}`}return m?{content:r}:_.url.openDeeplink(r)}}))},$=function(){for(const e of N)e()},d=async function(e,t,i){const s=t?`&author_id=${t}`:"",m=i?`&channel_id=${i}`:"",a=t?"":"&min_id=0";return(await p.get({url:`/guilds/${e}/messages/search`,query:`include_nsfw=true${s}${m}${a}&sort_by=timestamp&sort_order=asc&offset=0`})).body.messages[0][0]},g=async function(e,t){const i=t?`&author_id=${t}`:"",s=t?"":"&min_id=0";return(await p.get({url:`/channels/${e}/messages/search`,query:`&sort_by=timestamp&sort_order=asc&offset=0${i}${s}`})).body.messages[0][0]};return u.onLoad=I,u.onUnload=$,u})({},vendetta.commands,vendetta.metro,vendetta.metro.common);
